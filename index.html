<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>器用貧乏の型診断｜5タイプ判定</title>
<meta name="description" content="あなたの“器用貧乏の型”を10問で判定。翻訳者／触媒／編集プロデューサー／実装ディレクター／アイデアメーカーの5タイプから診断します。" />
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
  :root{
    --bg:#0b0c10; --panel:#111217; --ink:#e8e8ea; --muted:#a1a1aa;
    --line:#1f2330; --hi:#66d9ed; --ok:#9ae6b4;
  }
  *{box-sizing:border-box}
  body{margin:0;background:linear-gradient(180deg,#0b0c10,#0e1016);color:var(--ink);
       font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;line-height:1.6}
  .wrap{max-width:960px;margin:36px auto;padding:0 16px}
  .card{background:var(--panel);border:1px solid var(--line);border-radius:16px;padding:22px;
        box-shadow:0 12px 30px rgba(0,0,0,.35)}
  h1{margin:0 0 6px;font-size:28px;font-weight:800}
  .lead{color:var(--muted);margin:0 0 20px}
  h2{margin:16px 0 8px;font-size:18px}
  .q{margin:12px 0;padding:16px;border:1px solid #202437;border-radius:12px;background:#0f111a}
  .q label{display:block;font-weight:700;margin-bottom:8px}
  .scale{display:flex;gap:8px;flex-wrap:wrap}
  .scale input{display:none}
  .scale label{flex:1;min-width:64px;text-align:center;padding:10px;border:1px solid #2a2f42;border-radius:10px;cursor:pointer;color:#c9c9d1}
  .scale input:checked+label{border-color:var(--hi);box-shadow:0 0 0 2px rgba(102,217,237,.35) inset;color:#fff}
  .btns{display:flex;gap:12px;flex-wrap:wrap;margin-top:16px}
  button{background:linear-gradient(180deg,#1c9abf,#187da0);border:none;color:#fff;padding:12px 16px;border-radius:12px;font-weight:800;cursor:pointer}
  button.secondary{background:#22283a}
  .muted{color:var(--muted)}
  .row{display:grid;grid-template-columns:1fr 1fr;gap:16px}
  .row > div{background:#0f111a;border:1px solid #202437;border-radius:12px;padding:16px}
  .pill{display:inline-block;padding:3px 10px;border:1px solid #2a3148;border-radius:999px;font-size:12px;color:#b8c0ff}
  .share{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
  input[type="text"], input[type="email"]{width:100%;padding:10px;border-radius:10px;border:1px solid #2a2f42;background:#0f111a;color:#fff}
  canvas{background:#0b0d14;border-radius:12px;padding:12px}
  @media (max-width:840px){ .row{grid-template-columns:1fr} }
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>器用貧乏の型診断</h1>
    <p class="lead">10問・5段階の自己評価で、あなたの“器用貧乏の型”を判定します。翻訳者／触媒／編集プロデューサー／実装ディレクター／アイデアメーカーの5タイプ。</p>

    <!-- 設定：公開URL（X/LinkedInシェア用）。未設定なら現在のURLを使用 -->
    <!-- const SITE_URL = 'https://あなたのユーザー名.github.io/レポジトリ名/'; -->

    <form id="form"></form>
    <div class="btns">
      <button type="button" id="calc">診断する</button>
      <button type="button" id="reset" class="secondary">リセット</button>
    </div>
  </div>

  <div id="resultCard" class="card" style="margin-top:16px;display:none">
    <div class="row">
      <div>
        <h2>あなたの型（判定）</h2>
        <div id="winner" style="font-size:20px;font-weight:800;margin-bottom:6px"></div>
        <div id="summary" class="muted"></div>
        <div style="margin-top:8px"><span id="tieNote" class="pill" style="display:none">同点は優先順で判定</span></div>
      </div>
      <div>
        <h2>タイプ別スコア</h2>
        <canvas id="chart" height="200"></canvas>
      </div>
    </div>

    <div class="row" style="margin-top:16px">
      <div>
        <h2>強み</h2>
        <div id="strength"></div>
        <h2 style="margin-top:14px">よくある悩み</h2>
        <div id="pain"></div>
      </div>
      <div>
        <h2>器用リッチに進化すると</h2>
        <div id="evolve"></div>
        <h2 style="margin-top:14px">次の一手（14日）</h2>
        <ol id="actions"></ol>
      </div>
    </div>

    <div style="margin-top:14px">
      <h2>結果の保存とシェア</h2>
      <div class="share">
        <button id="saveImg" class="secondary" type="button">画像として保存</button>
        <button id="savePdf" class="secondary" type="button">PDFとして保存</button>
        <button id="copy" type="button">テキストをコピー</button>
        <a id="xshare" class="pill" target="_blank" rel="noopener">Xでシェア</a>
        <a id="lnshare" class="pill" target="_blank" rel="noopener">LinkedInでシェア</a>
      </div>
      <p class="muted" style="margin-top:6px">ハッシュタグ：#器用貧乏の型診断</p>
    </div>
  </div>
</div>

<!-- libs -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf@2.5.1/dist/jspdf.umd.min.js"></script>

<script>
/* =========================
   設定・文言（ここだけ編集で運用可能）
   ========================= */
const SITE_URL = ''; // 例: 'https://yourname.github.io/kiyou-diagnosis/'。空なら自動で現在URL
const TYPES = [
  { key:'translator',   name:'翻訳者型',        order:1 },
  { key:'catalyst',     name:'触媒型',          order:2 },
  { key:'editor',       name:'編集プロデューサー型', order:3 },
  { key:'director',     name:'実装ディレクター型',    order:4 },
  { key:'ideator',      name:'アイデアメーカー型',    order:5 }
];

const QUESTIONS = [
  { id:'q1',  text:'初めてのテーマでも、人にわかりやすく説明するのが得意だ',       type:'translator' },
  { id:'q2',  text:'新しい人と人を紹介したり、場をつなぐのが好きだ',                   type:'catalyst' },
  { id:'q3',  text:'バラバラの情報を整理して、見やすくまとめるのが好きだ',             type:'editor' },
  { id:'q4',  text:'進まない仕事を見ると、段取りを組んで前に進めてしまう',             type:'director' },
  { id:'q5',  text:'アイデアや企画を考えるのが楽しく、次々と思いつく',                 type:'ideator' },
  { id:'q6',  text:'相手の知らない分野を、自分の言葉でかみ砕いて説明したことがある',   type:'translator' },
  { id:'q7',  text:'勉強会や交流会で「人と人をつなげる役」になることが多い',           type:'catalyst' },
  { id:'q8',  text:'資料や投稿で「見やすい」「分かりやすい」と言われたことがある',     type:'editor' },
  { id:'q9',  text:'締め切り前は「自分がタスクを割り振って回した方が早い」と思う',     type:'director' },
  { id:'q10', text:'アイデアをよく書き留めるが、形にならないまま溜まりがちだ',           type:'ideator' },
];

const FEEDBACK = {
  translator: {
    name:'翻訳者型',
    strength:'専門的で難しいことを、誰にでもわかる言葉で説明できる。初見領域の理解も早く、橋渡し役になれる。',
    pain:'「便利な説明係」で終わり、専門家として見られにくいことがある。',
    evolve:'複数分野をつなぐ「知の翻訳家」。研修・出版・ファシリテーションで価値を発揮。',
    actions:[
      '自分の翻訳プロセスを3ステップで言語化する（例：傾聴→要約→比喩）',
      'よくある質問5件に1分回答を作り、録音して言い回しを磨く',
      '図解テンプレを1枚作り、説明に必ず添える'
    ]
  },
  catalyst: {
    name:'触媒型',
    strength:'人と人をつなぎ、安心感のある場をつくる。つながりから化学反応を起こす。',
    pain:'自分の専門が弱く見え、「誰とでも仲良くする人」で止まりがち。',
    evolve:'共創コミュニティを動かすファシリテーター。企業や地域のイノベーションで不可欠な存在に。',
    actions:[
      '紹介カード（この人×この人で何が起きる？）を週3件書く',
      'イベント後24時間以内に「次の一手メール」を3通送る',
      'つなぐ分野を2つに絞り、自己紹介に明記する'
    ]
  },
  editor: {
    name:'編集プロデューサー型',
    strength:'情報収集・整理・見せ方が巧み。伝わる構造を設計できる。',
    pain:'まとめ役に回り、自分の影響力が見えにくい。',
    evolve:'ホワイトペーパーやZine、教材化で編集力をIP化し、発信の核にできる。',
    actions:[
      '1枚の構造テンプレ（問題→洞察→解決→次アクション）を固定',
      '過去事例を3枚スライド（Before/After/手順）で再編集',
      '月1本のZine/ノートを発行する'
    ]
  },
  director: {
    name:'実装ディレクター型',
    strength:'段取り・推進力に優れ、計画を実行に移す力が強い。',
    pain:'裏方で消耗しがちで、自分の価値が可視化されにくい。',
    evolve:'伴走型B2Bやライセンス展開で「成果を形にする力」を資産化できる。',
    actions:[
      '着手→合意→完了の3ゲートで案件の流れを1枚化',
      '週次運用のチェックリストを作り、共有する',
      'ミニ提案書（1枚）をテンプレ化して反復する'
    ]
  },
  ideator: {
    name:'アイデアメーカー型',
    strength:'新しい発想や企画を連発できる。独自の切り口で場を活性化。',
    pain:'アイデアが形にならず、途中で飽きやすいと見られる。',
    evolve:'発想をフレーム化し、再現可能な企画モデルを量産するクリエイティブプロデューサーへ。',
    actions:[
      'アイデア選定の基準（インパクト×実行容易性）を数値で決める',
      '採択アイデア1本に2週間集中するルールを設定',
      'アイデア→検証→公開のミニサイクルを毎週回す'
    ]
  }
};

/* =========================
   UI描画（設問）
   ========================= */
const form = document.getElementById('form');
QUESTIONS.forEach((q,i)=>{
  const div = document.createElement('div'); div.className='q';
  const name = q.id;
  div.innerHTML = `
    <label for="${name}">${i+1}. ${q.text}</label>
    <div class="scale">
      ${[1,2,3,4,5].map(v=>`
        <input type="radio" id="${name}_${v}" name="${name}" value="${v}">
        <label for="${name}_${v}">${v}</label>
      `).join('')}
    </div>
    <div class="muted" style="margin-top:6px">1=全く当てはまらない ／ 5=とても当てはまる</div>
  `;
  form.appendChild(div);
});

/* =========================
   診断ロジック
   ========================= */
let chart;
const $ = sel => document.querySelector(sel);
const pick = name => {
  const n = document.querySelector(`input[name=${name}]:checked`);
  return n ? Number(n.value) : 0;
};

function calcScores(){
  // 質問ごとの点を型に集計
  const points = { translator:0, catalyst:0, editor:0, director:0, ideator:0 };
  for(const q of QUESTIONS){
    const v = pick(q.id);
    if(!v){ throw new Error('未回答の設問があります'); }
    points[q.type] += v;
  }
  // 勝者（同点は order 優先）
  const sorted = TYPES
    .map(t=>({key:t.key, name:t.name, order:t.order, score:points[t.key]}))
    .sort((a,b)=> b.score===a.score ? a.order-b.order : b.score-a.score);
  const winner = sorted[0];
  const tie = sorted.filter(s=>s.score===winner.score).length>1;

  return { points, winner, tie, ranked:sorted };
}

/* =========================
   表示・シェア・保存
   ========================= */
const ctxVar = { stageKey:null };

function renderResult(model){
  const { points, winner, tie, ranked } = model;
  const fb = FEEDBACK[winner.key];

  $('#resultCard').style.display = 'block';
  $('#winner').textContent = `あなたは「${fb.name}」です`;
  $('#summary').textContent = `各タイプの合計点：翻訳者${points.translator}／触媒${points.catalyst}／編集${points.editor}／実装${points.director}／アイデア${points.ideator}`;
  $('#tieNote').style.display = tie ? 'inline-block' : 'none';

  $('#strength').textContent = fb.strength;
  $('#pain').textContent     = fb.pain;
  $('#evolve').textContent   = fb.evolve;

  const ol = $('#actions'); ol.innerHTML='';
  fb.actions.forEach(a=>{ const li=document.createElement('li'); li.textContent=a; ol.appendChild(li); });

  // グラフ
  const ctx = document.getElementById('chart');
  chart && chart.destroy();
  chart = new Chart(ctx, {
    type:'radar',
    data:{
      labels:['翻訳者','触媒','編集P','実装D','アイデア'],
      datasets:[{ label:'スコア', data:[
        points.translator, points.catalyst, points.editor, points.director, points.ideator
      ]}]
    },
    options:{ scales:{ r:{ suggestedMin:0, suggestedMax:10, ticks:{display:false}}}, plugins:{legend:{display:false}} }
  });

  // シェア文・リンク
  ctxVar.stageKey = winner.key;
  const site = SITE_URL || (location.origin + location.pathname);
  const shareText = `私は「器用貧乏の型診断」で ${fb.name} でした。#器用貧乏の型診断\n${site}`;
  $('#copy').onclick = async ()=>{ await navigator.clipboard.writeText(shareText); alert('コピーしました'); };
  $('#xshare').href  = `https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}`;
  // LinkedInはURLシェア中心（テキストは反映されない仕様）
  $('#lnshare').href = `https://www.linkedin.com/sharing/share-offsite/?url=${encodeURIComponent(site)}`;
}

async function saveAsImage(){
  const el = document.getElementById('resultCard');
  const canvas = await html2canvas(el, {backgroundColor:'#0b0c10', scale:2});
  const a = document.createElement('a');
  a.href = canvas.toDataURL('image/png');
  a.download = 'type-result.png';
  a.click();
}

async function saveAsPdf(){
  const el = document.getElementById('resultCard');
  const canvas = await html2canvas(el, {backgroundColor:'#0b0c10', scale:2});
  const imgData = canvas.toDataURL('image/png');
  const { jsPDF } = window.jspdf;
  const pdf = new jsPDF({orientation:'p', unit:'pt', format:'a4'});
  const w = 540, h = canvas.height*(w/canvas.width);
  pdf.setFillColor(11,12,16); pdf.rect(0,0,595,842,'F');
  pdf.addImage(imgData,'PNG',28,40,w,h);
  pdf.save('type-result.pdf');
}

/* =========================
   イベント
   ========================= */
document.getElementById('calc').addEventListener('click', ()=>{
  try{
    const model = calcScores();
    renderResult(model);
    window.scrollTo({top:document.getElementById('resultCard').offsetTop-8, behavior:'smooth'});
  }catch(e){
    alert(e.message || 'エラーが発生しました');
  }
});
document.getElementById('reset').addEventListener('click', ()=>{
  document.querySelectorAll('input[type=radio]').forEach(n=>n.checked=false);
  document.getElementById('resultCard').style.display='none';
  if(chart) chart.destroy();
});
document.getElementById('saveImg').addEventListener('click', saveAsImage);
document.getElementById('savePdf').addEventListener('click', saveAsPdf);

/* =========================
   参考：リード保存を足す場合（GASやNetlify）
   - 後から fetch 1行で追加可能。公開を早めるため今回は未実装。
   ========================= */
// async function saveLead(payload){ await fetch('<<YOUR_GAS_URL>>',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(payload)}); }
// 診断後に呼ぶ例：saveLead({ type: FEEDBACK[model.winner.key].name, points: model.points });

</script>
</body>
</html>
